let G_DATA,startbefore=0;window.G_CONFIG={},addEventListener("DOMContentLoaded",()=>{function e(){const e=document.getElementById("load-more");e.disabled=!0;const t=n.api+"?startbefore="+startbefore;fetch(t,{async:!0}).then(e=>e.json()).then(t=>{0!==t.nextBefore?startbefore=t.nextBefore:e.style.display="none";for(var a=[],r=Object.keys(t.ChannelMessageData),s=0;s<r.length;s++){var d=r[s];a.unshift(d)}var l=[];for(s=0;s<a.length;s++){d=a[s];var m=t.ChannelMessageData[d];l.push(m)}if(t.ChannelMessageData=l,window.G_DATA=t,console.log(window.G_DATA),Handlebars){const e=document.getElementById("template").innerHTML,t=Handlebars.compile(e),a=t(window.G_DATA);o.insertAdjacentHTML("beforeend",a),n.zoom&&(mediumZoom?mediumZoom("[data-zoomable]"):console.error("组件丢失: mediumZoom"))}else console.error("组件丢失: Handlebars");e.disabled=!1}).catch(e=>{o.innerText="我们遇到了一些错误，你可以刷新页面重试"})}const n=JSON.parse(JSON.stringify(window.G_CONFIG)),o=document.getElementById(n.ref);console.log(n,o),fetch(n.api,{async:!0}).then(e=>e.json()).then(t=>{for(var a=[],r=Object.keys(t.ChannelMessageData),s=0;s<r.length;s++){var d=r[s];a.unshift(d)}var l=[];for(s=0;s<a.length;s++){d=a[s];var m=t.ChannelMessageData[d];l.push(m)}if(t.ChannelMessageData=l,window.G_DATA=t,console.log(window.G_DATA),Handlebars){const t=document.getElementById("template").innerHTML,a=Handlebars.compile(t),r=a(window.G_DATA);if(o.innerText="",o.insertAdjacentHTML("beforeend",r),document.getElementById("load-more").addEventListener("click",e),document.getElementById("load-more").style="",0==window.G_DATA.nextBefore){const e=document.getElementById("load-more");e.remove()}startbefore=window.G_DATA.nextBefore,n.zoom&&(mediumZoom?mediumZoom("[data-zoomable]"):console.error("组件丢失: mediumZoom"))}else console.error("组件丢失: Handlebars")}).catch(e=>{o.innerText="我们遇到了一些错误，你可以刷新页面重试",console.log(e)})});